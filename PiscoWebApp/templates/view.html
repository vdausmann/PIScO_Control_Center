<!DOCTYPE html>
<html>
<head>
    <title>{{filename}}</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="panel">
<h2>File: {{filename}}</h2>

{% macro render_node(name, node, parent_path="") %}
    {% set fullpath = parent_path + "/" + name if parent_path else name %}

    {% if node.type == "group" %}
        <div>
            <span class="group" onclick="toggle('{{fullpath}}')">ğŸ“ {{name}}</span>
            <div class="children" id="{{fullpath}}">
                {% for child_name, child in node.children.items() %}
                    {{ render_node(child_name, child, fullpath) }}
                {% endfor %}
            </div>
        </div>
    {% else %}
        <div class="dataset">
            ğŸ“„ <a href="/dataset/{{filename}}/{{fullpath}}">{{name}}</a>
            - <a href="/dataset_histogram/{{filename}}/{{fullpath}}">ğŸ“Š Group Histogram</a>
        </div>
    {% endif %}
{% endmacro %}

{% for name, node in tree.items() %}
    {{ render_node(name, node) }}
{% endfor %}

<br><br>
<a href="/">â¬… Back to Dashboard</a>
</div>

<script>
function toggle(id) {
    const el = document.getElementById(id);
    if (!el) return;
    el.style.display = (el.style.display === "block") ? "none" : "block";
}
</script>
</body>
</html>
